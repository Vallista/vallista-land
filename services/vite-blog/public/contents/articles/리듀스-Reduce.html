<p>Reduce는 줄이다, 감속하다 라는 뜻으로써, JavaScript에서 배열 작업 할 때 원하는 부분을 줄여서 사용할 수 있다.</p>
<p>JavaScript의 Reduce는 Array의 고차함수로써, map 같은 함수들을 커스터마이징 해서 사용할 수 있다.</p>
<h2>받는 인자 정보</h2>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="javascript" data-theme="one-dark-pro"><code data-language="javascript" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#E5C07B">Array</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">prototype</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">reduce</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">callback</span><span style="color:#ABB2BF">: (</span><span style="color:#E06C75">accumulator</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">index</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">array</span><span style="color:#ABB2BF">), </span><span style="color:#E06C75">optional</span><span style="color:#ABB2BF">: </span><span style="color:#E06C75">initValue</span><span style="color:#ABB2BF">)</span></span></code></pre></figure>
<p>reduce 함수는 인자 callback 함수와 optional로 초기화 값을 받는다.</p>
<p>reduce의 callback은 4개의 인자를 순서대로 받는다.</p>
<ul>
<li>accumulator : 저장되는 값 (initValue를 기준으로 시작된다. initValue가 없다면, 첫번째 값을 넣습니다.</li>
<li>now : 현재 값을 말한다.</li>
<li>index : 인덱스 번호 (순서)</li>
<li>array : 원본 전체 배열</li>
</ul>
<h2>사용 예시</h2>
<p>간단한 사용 예를 들어보자</p>
<p>flatten 함수는 인자에 배열이 있다면 배열을 풀어서 대입 해주는 역할을 한다.</p>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="javascript" data-theme="one-dark-pro"><code data-language="javascript" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> array</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> [</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">, [</span><span style="color:#D19A66">3</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">4</span><span style="color:#ABB2BF">], </span><span style="color:#D19A66">5</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">6</span><span style="color:#ABB2BF">, [</span><span style="color:#D19A66">7</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">8</span><span style="color:#ABB2BF">], </span><span style="color:#D19A66">9</span><span style="color:#ABB2BF">]</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> flatten</span><span style="color:#ABB2BF">() {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> result</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> array</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">reduce</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">acc</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">now</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">    before</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> Array</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">isArray</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">before</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">?</span><span style="color:#E5C07B"> before</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">concat</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">now</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> (</span><span style="color:#E06C75">before</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> [</span><span style="color:#E06C75">before</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75">now</span><span style="color:#ABB2BF">])</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">    return</span><span style="color:#E06C75"> before</span></span>
<span data-line=""><span style="color:#ABB2BF">  })</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#E06C75"> result</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> result</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> flatten</span><span style="color:#ABB2BF">()</span></span>
<span data-line=""><span style="color:#E5C07B">console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">log</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">result</span><span style="color:#ABB2BF">)</span></span></code></pre></figure>
<h2>좀 더 깊게</h2>
<ul>
<li>flatten 재귀 호출</li>
</ul>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="javascript" data-theme="one-dark-pro"><code data-language="javascript" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> array</span><span style="color:#56B6C2"> =</span><span style="color:#ABB2BF"> [</span><span style="color:#D19A66">1</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">2</span><span style="color:#ABB2BF">, [</span><span style="color:#D19A66">3</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">4</span><span style="color:#ABB2BF">, [</span><span style="color:#D19A66">5</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">6</span><span style="color:#ABB2BF">, [</span><span style="color:#D19A66">7</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">8</span><span style="color:#ABB2BF">]]], </span><span style="color:#D19A66">9</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">10</span><span style="color:#ABB2BF">, [</span><span style="color:#D19A66">11</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">12</span><span style="color:#ABB2BF">, [</span><span style="color:#D19A66">13</span><span style="color:#ABB2BF">, [</span><span style="color:#D19A66">14</span><span style="color:#ABB2BF">, </span><span style="color:#D19A66">15</span><span style="color:#ABB2BF">], </span><span style="color:#D19A66">16</span><span style="color:#ABB2BF">]]]</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> flatten</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">array</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">  const</span><span style="color:#E5C07B"> result</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> array</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">reduce</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">accel</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">value</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">    if</span><span style="color:#ABB2BF"> (</span><span style="color:#56B6C2">!</span><span style="color:#E5C07B">Array</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">isArray</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">)) </span><span style="color:#E5C07B">accel</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">push</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">    else</span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E06C75">      accel</span><span style="color:#56B6C2"> =</span><span style="color:#E5C07B"> accel</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">concat</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">flatten</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">))</span></span>
<span data-line=""><span style="color:#ABB2BF">    }</span></span>
<span data-line=""><span style="color:#C678DD">    return</span><span style="color:#E06C75"> accel</span></span>
<span data-line=""><span style="color:#ABB2BF">  }, [])</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#E06C75"> result</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#C678DD">const</span><span style="color:#E5C07B"> result</span><span style="color:#56B6C2"> =</span><span style="color:#61AFEF"> flatten</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">array</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#E5C07B">console</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">log</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">result</span><span style="color:#ABB2BF">)</span></span></code></pre></figure>
<ul>
<li>Map</li>
</ul>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="javascript" data-theme="one-dark-pro"><code data-language="javascript" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> map</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">arr</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">func</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> arr</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">reduce</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">stack</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">value</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#E5C07B">    stack</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">push</span><span style="color:#ABB2BF">(</span><span style="color:#61AFEF">func</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">))</span></span>
<span data-line=""><span style="color:#C678DD">    return</span><span style="color:#E06C75"> stack</span></span>
<span data-line=""><span style="color:#ABB2BF">  }, [])</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>
<ul>
<li>Filter</li>
</ul>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="javascript" data-theme="one-dark-pro"><code data-language="javascript" data-theme="one-dark-pro" style="display: grid;"><span data-line=""><span style="color:#C678DD">function</span><span style="color:#61AFEF"> filter</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75;font-style:italic">arr</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">func</span><span style="color:#ABB2BF">) {</span></span>
<span data-line=""><span style="color:#C678DD">  return</span><span style="color:#E5C07B"> arr</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">reduce</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75;font-style:italic">stack</span><span style="color:#ABB2BF">, </span><span style="color:#E06C75;font-style:italic">value</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=></span><span style="color:#ABB2BF"> {</span></span>
<span data-line=""><span style="color:#C678DD">    if</span><span style="color:#ABB2BF"> (</span><span style="color:#61AFEF">func</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">)) </span><span style="color:#E5C07B">stack</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">push</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">value</span><span style="color:#ABB2BF">)</span></span>
<span data-line=""><span style="color:#C678DD">    return</span><span style="color:#E06C75"> stack</span></span>
<span data-line=""><span style="color:#ABB2BF">  }, [])</span></span>
<span data-line=""><span style="color:#ABB2BF">}</span></span></code></pre></figure>